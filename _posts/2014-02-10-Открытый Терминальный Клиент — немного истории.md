---
layout: post
title: Открытый Терминальный Клиент — немного истории  
excerpt_separator: <!--end_excerpt-->  
---
Первоначально опубликован 10 фев 2014 в 00:02 на [habrhabr.ru](https://habr.com/ru/company/itfb/blog/211779/)  
<!--end_excerpt-->
Второй пост блога нашей компании будет посвящен истории разработки и производства первой партии плат «Компьютер-на-плате» [DS-110](http://opensourceclient.org/faq/specifications-ds-110).\
![](/img/2014-02-10-Открытый Терминальный Клиент — немного истории-img0.jpg)  
Ниже я коснусь некоторых аспектов этого проекта, а именно:
с чего начинали
-   анализ характеристик и свойств конкурентов
-   требования, которые надо было удовлетворить и условия в которых это было ещё выгодно
-   поиск подрядчика на разработку и изготовление
-   контракт, особенности заключения и соблюдения
-   косяки в процессе, смелость и глупость таких проектов
-   финансы

Точной даты принятия решения выпустить что-нибудь свое назвать не смогу. Где-то середина 2012 г. Зреть решение стало задолго до этого, но решились около середины 2012 года.  
Заканчивалась эра продажи чужих терминальных клиентов --- возить по малу невыгодно, много привезешь --- производитель цену снизит, а на складе ещё много старых запасов. Захотелось этот момент контролировать. В общем как и в любом другом бизнесе «купи-продай» (это мнение основано на моём опыте и может не имеет ничего общего с тем, как на самом деле).  
Из общения с покупателями сформировались требования к терминальному клиенту, некоторые из них:  
-   невысокая цена
-   надёжность (в т.ч. отсутствие активного охлаждения)
-   больше портов USB
-   подключения к разным мониторам dsub/hdmi/dvi
-   корпус, позволяющий закрепить на монитор
Исходя из этих требований были сознательно исключены решения:  
-   имеющие в основе wince и другие ОС для встраиваемых систем с лицензионными отчислениями. К примеру лицензия, позволяющая запустить клиент для RDP стоит 15 у.е. для производителя. [BSP](http://ru.wikipedia.org/wiki/Board_Support_Package) обычно платные, средства разработки только за деньги, ограниченный срок поддержки (конечно срок жизни ОС линейки CE 10 лет, но отсчитываются они с выхода первого релиза, который использовать не получается, т.к. соответствующее железо дорого стоит. Ориентирование на недорогие решения не позволяет использовать последнюю версию встраиваемой ОС и соответственно срок поддержки сильно меньше 10 лет).  
-   имеющие вентилятор в системе охлаждения --- является ещё одной точкой отказа.  
-   имеющие в основе x86 архитектуру --- конкурировать с производителями материнских плат с впаянными процессорами на их территории можно только если ты сам такой производитель.  
Далее был поиск по «платам-для-разработки» и уже готовым «компьютерам-на-плате», который ни к чему не привёл. Платы, подходящей под требования, не нашлось.  
Но анализ имеющихся плат для разработки выявил существование [Системы-на-чипе(SoC)](http://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D0%BD%D0%B0_%D0%BA%D1%80%D0%B8%D1%81%D1%82%D0%B0%D0%BB%D0%BB%D0%B5) [Allwinner A10](http://ru.wikipedia.org/wiki/Allwinner_A1X) и платы на нем [Cubieboard](http://cubieboard.org/). Погрузившись поглубже и поверхностно почитав про возможности пришло понимание, что вот оно, то самое, из которого может получиться! Allwinner A10 имеет открытую спецификацию в отличии от, например, той SoC, что составляет основу Raspberry Pi. Это означало, что на нем можно построить свою плату.  
На Allwinner A10 можно собрать из исходного кода Android и специально заточенный Linux --- [Sunxi](http://linux-sunxi.org/Main_Page), а также Debian и Ubuntu. Это сильно снижало стоимость разработки и поддержки прошивки и открывало возможности использовать плату не только как терминальный клиент. Поддерживать в случае открытых кодов можно неопределенно долго --- всегда можно что-то допились самому --- пока выпускаются железки. И эти допиливания можно будет использовать в других проектах и/или поделиться с сообществом.  

**Были сформированы уточненные требования**\  
Элементарная база:  
-   SoC --- Allwiner A10  
-   1 ГБ RAM, теоретически можно было замахиваться на два, но на тот момент не было даже плат для разработки с 2 ГБ RAM  
-   Портов USB больше трёх --- три по опыту продажи китайских устройств мало  
-   Питание от внешнего блока питания --- определялось назначением устройства и возможного блока питания  
-   «Китайские» терминальные клиенты, продаваемые ранее, подсказали корпус и определили размеры платы, а так же блок питания. Разработка своего корпуса и его производство оправдано только на очень больших партиях, например изготовление пресс формы одной детали корпуса от 100 000 руб., --- в корпусе обычно больше одной детали. Это стоимость изготовления без разработки пресс формы. Выпускать корпус под нашу плату не было смысла. Корпус подходил не полностью, пришлось заменять некоторые детали на специально изготовленные для нашей платы. Цены на изготовление корпуса были получены из слабой попытки изучения производства корпуса в нашей стране, в этот раз произвести в нашей стране не получилось.  
-   Упаковка из картона --- вот что можно не везти из Китая, на наших объёмах здесь дешевле
Параллельно искали кто бы мог это сделать. Умения держать паяльник и понимания что показывает осциллограф явно было недостаточно. Погружаться в разработку цифровой техники отодвинуло бы сроки до «никогда».  
Поэтому погрузились в поиски.  
Чтение разных форумов русскоязычной части интернета на предмет «сделай сам», «сделаю на заказ», своими руками и т.п. Несколько раз пытался вписываться с авторами сообщений, отвечали единицы, может быть из-за того, что форумы не пересылали личку на почту, а автор сообщения не заходит на форум. Может автору не интересна эта тема. Может письма попадали в спам. Может ещё что-то. Но отвечали единицы, несколько продолжили переписки, совсем единицы назвали цену и сроки.  
По результатам поисков сложилось впечатление, что реально разработать плату за деньги при которых эта затея ещё будет не убыточной не получится. Отечественные разработчики просили оплату вперёд, без гарантии что заработает и без изготовления прототипов, в эту разработку не входила разработка (допиливание) ПО, т.е. нужен был отдельный разработчик для ПО.  
Стал искать по фирмам --- впечатления очень похоже, только гораздо (в разы) дороже. Но в этом случае можно прототип получить в железе и возможен какой-никакой контракт на нашей территории, а значит и возмещение ущерба при невыполнении обязательств. Возможно изготовление прототипов, правда сроки это увеличивало до года... Наверное потому-что изготовить 6-ти слойную плату можно только в Китае, потом её привезти, собрать и начинать тестировать, а это время.  
Обратил внимание на иноязычный интернет. Всякие переводчики и средства коммуникации для связи помогали в этом. В живую, по скайпу или по телефону представителя подрядчика я пока не видел... И не слышал...  
**Особенности поиска и переписки при этом:**  
-   Смешной английский и особенности переводчиков. Так случилось, что во всех учебных заведениях я изучал немецкий язык. В силу хобби изучил и письменный английский. Потом это пригодилось на работе. Этих знаний, гуглтранслейта, и видения цели хватило для поисков и заключения договоров на разработку, производство и доставку. «Смелость города берёт», иногда правда не смелость, а безрассудство и наивность. Но если слишком много (долго) думать и решать --- может найтись тот, кто думал меньше и решился быстрее.  
-   Про таможню --- не надо её бояться, если конечно готовы соблюдать законы и платить пошлины. Больше чем необходимо по закону с вас не возьмут, только документы надо правильно оформить. В этом тоже нет особых проблем, выяснять какой код ВЭД соответствует вашему товару и заранее учесть таможенную пошлину в бизнес-плане. Не забыть про таможенную стоимость и стоимость услуг таможенного брокера. У нас получилось обойтись без услуг таможенного брокера --- документы я подготовил сам.  
-   Обмен картинками --- неотъемлемая часть моих поисков и переговоров. При переговорах очень важно чтобы вы и ваш потенциальный партнер говорили об одном и том же. В этом сильно помогают картинки(фотографии) и paint для пометок (про paint утрирую конечно).  
-   Мелочей, которые можно было бы доверить исполнителю быть не может --- контролировать надо всё, иначе можно понадеяться на исполнителя, а исполнитель сделает эту мелочь исходя из своих интересов. Это, как правило, снижения качества и стоимости производства.  
-   «Великий китайский файерволл» --- не, не слышал. А если серьезно, во время поиска и общения ни разу не натыкался на какие-либо ограничения или проявления этого явления, при перечислении денег и доставке груза также не было никаких препятствий(таможня на нашей стороне не считается)  
Оказалось, что в стране, которая производит всё --- Китае --- есть фирмы занимающиеся разработкой сложных устройств. По результатам общения одна фирма показалась более адекватной, чем другие.  
А именно:  
-   менеджер задавал вопросы которые я ожидал услышать (другие вопросы тоже задавал, некоторые вопросы оказались полезными)  
-   торговался менеджер очень плохо, цена практически не снизилась, но в цену вошла разработка документации для производства платы, разработка ПО, изготовление прототипов и доставка прототипов нам  
-   фирма согласилась подписать контракт только при 100% предоплате. Страшно было отправлять средства на деревню дедушки Ляо, но это сильно снизило цену проекта разработки  
Контракт составили сами --- сказался опыт ввоза «китайских» устройств.  
И вот в конце декабря 2012 года мы оплатили всю сумму контракта через банк. Практически попрощавшись с достаточно большой суммой --- подрядчика то в глаза не видели... Судиться в Китае, с учетом срока судебного производства, точно выйдет дороже, чем уже заплатили.  
Было интересно контактировать непосредственно с разработчиком печатной платы --- договорились о ежедневном получении файла платы. Элементы платы постепенно размещались на плате одновременно с уточнением расположения и ответами на вопросы. Прошло больше месяца пока была готова документация. К этому моменту утрясли все вопросы с окончательными размерами и разъемами. Были получены datasheet'ы на все комплектующие.\  
![](/img/2014-02-10-Открытый Терминальный Клиент — немного истории-img1.jpg) --- в контракте  
![](/img/2014-02-10-Открытый Терминальный Клиент — немного истории-img2.png) --- по окончании разработки платы  
Затем изготовление прототипа и доставка. На эти этапы влиять не получилось, кроме как дергать менеджера своими однообразными вопросами.  
Срок на разработку документации и производство прототипов был 3 месяца. И он был сорван. Это была не только вина подрядчика, но и наши радужные ожидания. В договоре указывались рабочие дни. И в Китае оказывается на новый год не работают две недели (вот только что он кончился). И в неделе у них 5 рабочих дней, а не шесть, хотя иногда по субботам с менеджером, а затем и разработчиком можно было пообщаться.  
Примерно через месяц после окончания срока нам были отправлены прототипы.  
Кстати, к почте РФ у меня негатива нет --- возят, медленно, но дешево. Таможня та же что и у курьерских компаний, однако услуги брокера не навязываются. Даже не смогли подсказать куда обращаться за помощью. Трудно было подтвердить стоимость прототипов и их назначение --- аналогов не было. Объяснить сотруднику таможни назначение данной платы тоже было непросто. Но получилось, правда с 5 раза, т.е. комплект документов устроил сотрудника таможни на 5 приход в таможню. Когда везешь товар во второй раз --- уже проще, у сотрудника таможни есть факт провоза этого товара и он, опираясь на этот факт, более понятлив.  
Итак в мае 2013 года мы получили прототипы. В итоге от момента оплаты до момента получения на почте прототипов прошло примерно 5 месяцев. Некоторое время ушло на тестирование ПО.  
Всё было хорошо...((с)-слова моего сына в восьмилетнем возрасте).  
Однако прототип не поместился в корпус по высоте --- мешало большое количество разъемов и их размеры.  
Выходов было 2 --- можно было поменять разъемы или корпус. Был ещё третий выход --- всё бросить, но потраченных денег было жаль и он не рассматривался.  
Разъемы USB сдвоенные горизонтальные или вертикальные никак не помещались. Менять корпус было не вариант --- очень дорого снова разрабатывать плату. Это был почти тупик --- плата разработана и работает, корпус есть --- только вот собрать не получается. Денег было потрачено уже много...  
Опять погружение в поиск разъемов USB, какие они бывают, чем отличаются, кто производит и как можно быстро купить много и недалеко от фабрики на которой уже почти подготовили производство.  
Поиск привел к разъемам которые при небольшом изменение платы позволили корпусу нормально закрыться.  
Производить решили через фирму разработчика --- они брали на себя закупку, контроль производства, упаковку и отправку к нам. Все варианты производить на территории нашей страны превращались в производство в Китае, плюс сильно увеличенные сроки. Но был у этого варианта очень большой плюс --- товар получался уже на территории РФ и проблемы с прохождением таможни решал производитель.  
В этом контракте платежей было два --- до начала производства 50% и после окончания производства 50% перед отгрузкой. И опять сроки были сорваны. В этот раз из-за поиска поставщика новых разъемов USB. В результате бурной переписки с очень большим количеством поставщиков разъемов был найдет тот единственный, которой согласился поставить нужный тип в короткие сроки. Новые разъемы оказались сильно дороже заложенных в смету. Около 5 месяцев заняло производство и доставка первой партии.  
Получив платы занялись доводкой корпуса --- одну деталь надо было делать специально --- не подходит одна от «китайских» терминальных клиентов по причине увеличенного количества разъемов.  
![](/img/2014-02-10-Открытый Терминальный Клиент — немного истории-img3.jpg)  --- недостающая вставка  
![](/img/2014-02-10-Открытый Терминальный Клиент — немного истории-img4.jpg)  --- в сборе  
Пресс форму изготавливать по вышеуказанным причинам --- не наш случай, очень дорого. Пилить «на коленке» опять же дорого. Фрезерование и 3D принтинг --- тоже стрельба дорогими снарядами по воробьям.  
Выручила, как и раньше страна, которая производит всё --- Китай. Нашли поставщика, который согласился за сравнительно небольшие деньги изготовить недостающую деталь.  
Заключили договор, оплатили (опять 100% вперед), корпуса отгрузили --- ждём.  
**Про финансирование.**  
Пока удается обойтись без внешних заимствований --- это позволяет более свободно решать возникающие вопросы и проблемы.  
Курс валюты за период проекта сильно прыгал, этот риск не поддается контролю и прогнозированию, остается только скрестить пальцы и надеяться, что денег хватит.  
В принципе удалось удержаться в пределах бизнес-плана (как пафосно звучит).  
На сегодня у нас есть работающая плата и срок, когда мы сможем отгружать устройство «терминальный клиент» --- и этот срок близится.  
Что сейчас:  
-   Мы продаем готовую плату и доставляем по РФ --- [ссылка](http://opensourceclient.org/buy).  
-   По получении корпусов, все, кто купил плату --- смогут приобрести недостающие до комплекта части (корпус, крепление, блок питания, упаковку).  
-   До конца квартала мы надеемся начать продажи законченного устройства «терминальный клиент»  
**Ссылки:**  
Ссылка на [первый пост нашей компании](http://habrahabr.ru/company/itfb/blog/206186/)  
Наш сайт [opensourceclient.org](http://opensourceclient.org/)  
Наш форум [opensourceclient.org/forum](https://opensourceclient.org/forum/)  
Для нашей платы можно собрать [Android](https://opensourceclient.org/forum/viewtopic.php?f=13&t=20), [openbox system](https://opensourceclient.org/forum/viewtopic.php?f=13&t=18) и это работает.   
Можно собрать Linux Sunxi и он тоже работает.  
Можно использовать [готовые образы](https://opensourceclient.org/forum/viewtopic.php?f=14&t=22) Andoid и Linux.  
